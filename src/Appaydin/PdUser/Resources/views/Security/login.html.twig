{% extends "@PdUser/base.html.twig" %}

{% block head_title %}{{ 'security.login_title'|trans }}{% endblock %}

{% block body %}
{# templates/security/login.html.twig #}
<div class="login">
    <img src="{{ asset('assets/front/auth/bg-image.png') }}" alt="login image" class="login__img">

    <form action="{{ path('security_login') }}" method="post" class="login__form">
        <h1 class="login__title">{{ 'security.login_title'|trans }}</h1>

     
       {% if error %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endif %} 
        
        <div class="login__content">
            <div class="login__box">
                <i class="ri-user-3-line login__icon"></i>
                <div class="login__box-input">
                    <input name="_username" value="{{ last_username }}" type="email" required class="login__input" id="login-email" placeholder=" ">
                    <label for="login-email" class="login__label">{{ 'security.login_username'|trans }}</label>
                </div>
            </div>

            <div class="login__box">
                <i class="ri-lock-2-line login__icon"></i>
                <div class="login__box-input">
                    <input name="_password" type="password" required class="login__input" id="login-pass" placeholder=" ">
                    <label for="login-pass" class="login__label">{{ 'security.login_password'|trans }}</label>
                    <i class="ri-eye-off-line login__eye" id="login-eye"></i>
                </div>
            </div>
        </div>

        <div class="login__check">
            <div class="login__check-group">
                <input type="checkbox" class="login__check-input" id="login-check" name="_remember_me" value="on">
                <label for="login-check" class="login__check-label">{{ 'security.login_rememberme'|trans }}</label>
            </div>

            <a href="{{ path('security_resetting') }}" class="login__forgot">{{ 'security.forgot_password'|trans }}</a>
        </div>

        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}"/>

        <button type="submit" class="login__button">{{ 'security.login_btn'|trans }}</button>

        {# Refactored Google Login Button #}
        <div class="login__social">
            <p class="login__social-text">Or sign in with:</p>
            <a href="{{ path('hwi_oauth_redirect_to_service') }}" class="login__button login__button--social">
                <i class="ri-google-fill login__icon--social"></i>
                <span>Login with Google</span>
            </a>
        </div>

        <p class="login__register">
            Donâ€™t have an account?
            {% if user_registration is not empty %}
                <a href="{{ path('security_register') }}">{{ 'security.register'|trans }}</a>
            {% endif %}
        </p>
    </form>
</div>
{# Modal for user already exists #}
{% if app.session.flashBag.has('modal_error') %}
    <div class="modal-overlay" id="errorModal">
        <div class="modal-content">
            <h2>Error</h2>
            <p>{{ app.session.flashBag.get('modal_error')[0] }}</p>
            <button onclick="closeModal()">OK</button>
        </div>
    </div>
   
{% endif %}
<style>

 .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent black for blur effect */
            backdrop-filter: blur(5px); /* Blur the background */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            max-width: 400px;
            width: 100%;
        }

        .modal-content h2 {
            margin-bottom: 10px;
            color: #d9534f; /* Red for error */
        }

        .modal-content p {
            margin-bottom: 20px;
            color:black;
        }

        .modal-content button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .modal-content button:hover {
            background-color: #0056b3;
        }
.login__social {
  text-align: center;
  margin-bottom: 1.5rem;
}
.login__social-text {
  font-size: var(--small-font-size);
  color: var(--white-color);
  margin-bottom: 0.75rem;
}

.login__form {
  position: relative;
  background-color: hsla(0, 0%, 10%, 0.1);
  border: 2px solid var(--white-color);
  margin-inline: 1.5rem;
  padding: 2.5rem 3rem 1rem 3rem; /* Reduced padding from 2.5rem 1.5rem */
    border-radius: 1rem;
  backdrop-filter: blur(8px);
}

.login__button--social {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 1rem;
  border-radius: 0.5rem;
  background-color: transparent; /* Match form's transparency */
  border: 2px solid var(--white-color); /* Consistent border style */
  font-weight: var(--font-medium);
  color: black; /* White text to match theme */
  cursor: pointer;
  transition: background-color 0.3s;
}

.login__button--social:hover {
  background-color: hsla(0, 0%, 100%, 0.1); /* Subtle hover effect */
}

.login__icon--social {
  font-size: 1.25rem;
  margin-right: 0.75rem; /* Space between icon and text */
}

/* Ensure the span inside the button aligns properly */
.login__button--social span {
  font-size: var(--normal-font-size);
}

.login__button {
  width: 100%;
  padding: 1rem;
  border-radius: 0.5rem;
  background-color: var(--white-color);
  font-weight: var(--font-medium);
  cursor: pointer;
  margin-bottom: 2rem;
  text-align: center; /* Ensure text is centered */
}
</style>
<script>
        function closeModal() {
            document.getElementById('errorModal').style.display = 'none';
        }
    </script>


{% endblock %}



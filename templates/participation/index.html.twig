{% extends 'front/base.html.twig' %}

{% block title %}Participation List{% endblock %}

{% block body %}
    <div style="padding: 20px; margin: 80px auto 20px; max-width: 95%; transform: translateY(30px);">

        <!-- Carte principale avec tableau -->
        <div style="background: #FEFEFA; border-radius: 8px; box-shadow: 0 4px 12px rgba(1, 50, 32, 0.1); padding: 20px; margin-top: 30px; border: 1px solid #ACE1AF;">
            <!-- En-tête avec bouton et recherche -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; gap: 15px;">
                <div style="display: flex; align-items: center; gap: 20px; flex-grow: 1;">
                    <h1 style="font-size: 1.5rem; color: #00693E; margin: 0; white-space: nowrap;">Participation List</h1>

                    <!-- Barre de recherche -->
                    <form method="get" action="{{ path('app_participation_index') }}" style="flex-grow: 1; max-width: 400px;">
                        <div style="position: relative;">
                            <input type="text" name="search" placeholder="Search by name, email, phone..."
                                   style="width: 100%; padding: 8px 15px 8px 35px; border: 1px solid #ACE1AF; border-radius: 20px;
                      background-color: #FEFEFA; color: #013220; font-size: 0.9rem;"
                                   value="{{ search_term }}">
                            <button type="submit" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; color: #29AB87;">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </form>
                </div>

                <a href="{{ path('app_participation_new') }}"
                   style="padding: 8px 15px; background: #29AB87; color: white; border-radius: 4px; text-decoration: none; font-size: 0.9rem; white-space: nowrap;">
                    <i class="fas fa-plus"></i> Create New
                </a>
            </div>

            <!-- Tableau responsive - Couleurs modifiées -->
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; min-width: 900px; font-size: 0.9rem;">
                    <thead style="background: #013220;">
                    <tr>
                        <th style="padding: 10px 12px; text-align: left; border-bottom: 2px solid #29AB87; color: #FEFEFA;">ID</th>
                        <th style="padding: 10px 12px; text-align: left; border-bottom: 2px solid #29AB87; color: #FEFEFA;">First Name</th>
                        <th style="padding: 10px 12px; text-align: left; border-bottom: 2px solid #29AB87; color: #FEFEFA;">Last Name</th>
                        <th style="padding: 10px 12px; text-align: left; border-bottom: 2px solid #29AB87; color: #FEFEFA;">Email</th>
                        <th style="padding: 10px 12px; text-align: left; border-bottom: 2px solid #29AB87; color: #FEFEFA;">Phone</th>
                        <th style="padding: 10px 12px; text-align: left; border-bottom: 2px solid #29AB87; color: #FEFEFA;">City</th>
                        <th style="padding: 10px 12px; text-align: left; border-bottom: 2px solid #29AB87; color: #FEFEFA;">Zip Code</th>
                        <th style="padding: 10px 12px; text-align: left; border-bottom: 2px solid #29AB87; color: #FEFEFA;">Country</th>
                        <th style="padding: 10px 12px; text-align: right; border-bottom: 2px solid #29AB87; color: #FEFEFA;">Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for participation in participations %}
                        <tr style="border-bottom: 1px solid #ACE1AF; background: {% if loop.index is odd %}#FEFEFA{% else %}#E8F5EE{% endif %};">
                            <td style="padding: 8px 12px; color: #013220;">{{ participation.id }}</td>
                            <td style="padding: 8px 12px; color: #00693E;">{{ participation.firstName }}</td>
                            <td style="padding: 8px 12px; color: #00693E;">{{ participation.lastName }}</td>
                            <td style="padding: 8px 12px; color: #29AB87;">{{ participation.email }}</td>
                            <td style="padding: 8px 12px; color: #013220;">{{ participation.phone }}</td>
                            <td style="padding: 8px 12px; color: #00693E;">{{ participation.city }}</td>
                            <td style="padding: 8px 12px; color: #013220;">{{ participation.zipCode }}</td>
                            <td style="padding: 8px 12px; color: #00693E;">{{ participation.country }}</td>
                            <td style="padding: 8px 12px; text-align: right;">
                                <div style="display: inline-flex; gap: 5px;">
                                    <a href="{{ path('app_participation_show', {'id': participation.id}) }}"
                                       style="padding: 4px 8px; background: #29AB87; color: white; border-radius: 3px; text-decoration: none; font-size: 0.8rem;">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a href="{{ path('app_participation_edit', {'id': participation.id}) }}"
                                       style="padding: 4px 8px; background: #013220; color: white; border-radius: 3px; text-decoration: none; font-size: 0.8rem;">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="9" style="padding: 15px; text-align: center; color: #00693E;">
                                No records found
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pied de page - Couleurs modifiées -->
        <div style="margin-top: 40px; text-align: center; color: #00693E; font-size: 0.9rem; background: #FEFEFA; padding: 10px; border-radius: 5px; border: 1px solid #ACE1AF;">
            ECO BYTE Tunisia<br>
            +216 54221044
        </div>
    </div>
{% endblock %}